Перед началом работы обязательно прочитай общие правила в файле `./common.md`.

# Промпт: Старт задачи в YouTrack

## Инструкции для AI ассистента

1. Получи у оператора номер задачи (обычно формата `BC-1234`) и зафиксируй его.
2. Открой задачу в YouTrack по полученному идентификатору, внимательно прочитай описание и комментарии.
3. Если в описании заметны опечатки или неточности, предложи оператору оперативно их исправить.
4. Если данных недостаточно для начала работы, явно укажи на это оператору и запроси дополнительную информацию.
5. После подтверждения от оператора измени статус задачи на `In progress` и убедись, что исполнителем (Assignee) указан оператор. Если требуется — предложи оператору обновить поле исполнителя.
6. Прочитай файлы `./use-core-libs.md` и `./git-worktree-init.md`, чтобы синхронизироваться с актуальными инструкциями по core-libs и работе с `git worktree`. Все относительные пути, встречающиеся в промптах, трактуй относительно каталога, где лежит главный промпт.
7. На основе описания задачи предварительно определи, какие проекты затрагиваются. Затем уточни этот перечень у оператора.
8. Создай рабочие каталоги для задачи в подтверждённых проектах, по умолчанию используя стенд `stage`.
9. В каталоге `temp/` основного проекта (не `core-libs`) создай Markdown-файл с краткой сводкой по задаче. Укажи номер и название, ссылку на задачу, список затронутых проектов, пути к созданным рабочим каталогам и имя ветки Git. Структура файла может быть такой:
   ```
   # BC-8969 Title

   Title
   Link

   Info...
   ```
10. Для взаимодействия с задачей в YouTrack используй инструмент `youtrack-mcp`. При необходимости работы с репозиториями GitLab обращайся к `gitlab-mcp`.
11. Анализ проблемы фиксируй отдельным Markdown-файлом в каталоге `docs/` основного проекта внутри нового рабочего каталога (создай отдельный подкаталог по аналогии с существующей документацией, например `~/devel/bitkogan/code/client-api/stage-BC-9131-miniapp-batch-deals/docs/incidents/BC-9169.md`), придерживаясь формата записей анализа инцидентов и обязательно добавляя оглавление (TOC).
12. Рядом с анализом в том же подкаталоге создай отдельный Markdown-файл с детальным планом исправления; придерживайся той же структуры, обеспечь наличие TOC.
13. Прежде чем вносить какие-либо изменения в код или инфраструктуру, убедись, что план работ составлен и согласован; строго следуй ему при дальнейших действиях.
14. На этапе подготовки промпта ограничься созданием анализа и плана: реализацию исправлений выполняет отдельный этап после одобрения материалов.
