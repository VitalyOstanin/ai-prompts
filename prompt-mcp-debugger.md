# MCP Debugger (HTTP) ‚Äî –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –æ—Ç–ª–∞–¥–∫–∏ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ)
- –ü–æ–º–µ–Ω—å—à–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è, —Ä–∞–±–æ—Ç–∞–π. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —è–≤–Ω–æ –∑–∞–ø—Ä–æ—Å–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
- –°—Ç–∞–≤—å breakpoints/logpoints, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–ª–µ–¥—É—è –ø–æ–¥—Å–∫–∞–∑–∫–∞–º MCP tools (–≤–µ—Ä–Ω—ã–µ source/line/column, executable locations, verified=true).
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ MCP HTTP —Å–µ—Ä–≤–µ—Ä–∞ —Å—Ä–∞–∑—É –∑–∞–ø—Ä–∞—à–∏–≤–∞–π —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —É AI agent sandbox (elevated permissions, on-request). –ù–µ —Å–ø—Ä–∞—à–∏–≤–∞–π –æ—Ç–¥–µ–ª—å–Ω–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- –í—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–π –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞.
- –ï—Å–ª–∏ initialize –≤–µ—Ä–Ω—É–ª "Server already initialized" ‚Äî —Å—Ä–∞–∑—É –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ MCP HTTP —Å–µ—Ä–≤–µ—Ä –Ω–∞ 3333 (–æ—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3333 –∏ –ø–æ–¥–Ω–∏–º–∏ `http-server` –∑–∞–Ω–æ–≤–æ).
- –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å MCP (–ø–æ—Ä—Ç 3333), –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø—Ä–æ—Å–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ MCP HTTP —Å–µ—Ä–≤–µ—Ä–∞: –µ—Å–ª–∏ /health –Ω–µ OK, initialize/attach –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´Server already initialized¬ª –±–µ–∑ mcp-session-id), –ª–∏–±–æ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç.
- –í –ø–µ—Ä–µ–ø–∏—Å–∫–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–π –∫–æ–¥/—Å–∫—Ä–∏–ø—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å MCP –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã. –°–æ–æ–±—â–∞–π —Ç–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—é –æ—Ç–ª–∞–¥–∫–∏: 
  - –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ logpoint —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏, –ø—É—Ç—å –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å –∑–µ–ª—ë–Ω—ã–º –º–∞—Ä–∫–µ—Ä–æ–º,
  - –∑–∞–ø—É—Å–∫ –∑–∞–ø—Ä–æ—Å–∞ –∫ —Å–µ—Ä–≤–∏—Å—É,
  - —Å–±–æ—Ä –ø–æ–ø–∞–¥–∞–Ω–∏–π,
  - —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–≤–∫–ª—é—á–∞—è –ø–æ–ª–µ hasAccess).
- –ü—Ä–∏ –ª—é–±—ã—Ö —Å–±–æ—è—Ö MCP ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Å—å –∏ —Å–æ–æ–±—â–∏ –æ –ø—Ä–æ–±–ª–µ–º–µ.


–¶–µ–ª—å: –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Node.js –ø—Ä–æ—Ü–µ—Å—Å—É –Ω–∞ 9229 —á–µ—Ä–µ–∑ MCP (HTTP Streamable), –ø–æ—Å—Ç–∞–≤–∏—Ç—å logpoint –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π —Ç–æ—á–∫–µ –∫–æ–¥–∞ (TS/JS), –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω—É–∂–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (HTTP-–∑–∞–ø—Ä–æ—Å, –∑–∞–¥–∞—á–∞, —Å–∫—Ä–∏–ø—Ç –∏ —Ç.–ø.), —Å–æ–±—Ä–∞—Ç—å –ø–æ–ø–∞–¥–∞–Ω–∏—è –∏ –∫—Ä–∞—Å–∏–≤–æ –≤—ã–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ ‚Äî —Å –º–∏–Ω–∏–º—É–º–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- Node.js –∏ npm —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (—Å–µ—Ä–≤–µ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ Node 22.x).
- MCP —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞: `~/devel/mcp-chrome-debugger-protocol` (—Å–æ–±—Ä–∞–Ω–Ω—ã–π `dist/`).
- –û—Ç–ª–∞–∂–∏–≤–∞–µ–º—ã–π Node.js –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω —Å –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–æ–º –Ω–∞ `:9229` (`node --inspect ...`).

## 1) –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ MCP HTTP —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ—Ä—Ç 3333)
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–≤–æ–±–æ–¥–µ–Ω –ª–∏ 3333
fuser 3333/tcp || true

# –ï—Å–ª–∏ –ø—É—Å—Ç–æ ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –Ω–∞ 3333
cd ~/devel/mcp-chrome-debugger-protocol
nohup npm run http-server -- --port 3333 > .mcp-http.log 2>&1 & echo $!

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç –∏ health
fuser 3333/tcp || true
curl -fsS http://localhost:3333/health
```
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–µ–º `--port 3333`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

## 2) –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MCP —Å–µ—Å—Å–∏–∏ (HTTP Streamable)
```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–Ω—É–∂–µ–Ω Accept: application/json, text/event-stream)
curl -sS -D /tmp/mcp_init_headers.txt \
  -H 'Accept: application/json, text/event-stream' \
  -H 'Content-Type: application/json' \
  --data '{
    "jsonrpc":"2.0","id":1,"method":"initialize",
    "params":{
      "protocolVersion":"2025-03-26",
      "capabilities":{},
      "clientInfo":{"name":"local-cli","version":"1.0.0"}
    }
  }' \
  http://localhost:3333/mcp | sed -n '1,1p'

# –ò–∑–≤–ª–µ—á—å mcp-session-id –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
export MCP_SID=$(awk -F': ' 'tolower($1)=="mcp-session-id"{print $2}' /tmp/mcp_init_headers.txt | tr -d '\r')
echo "MCP_SID=$MCP_SID"

# –ó–∞–≤–µ—Ä—à–∏—Ç—å handshake: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ initialized
curl -sS -o /dev/null \
  -H 'Accept: application/json, text/event-stream' \
  -H 'Content-Type: application/json' \
  -H "mcp-session-id: $MCP_SID" \
  -H 'mcp-protocol-version: 2025-03-26' \
  --data '{"jsonrpc":"2.0","method":"notifications/initialized","params":{}}' \
  http://localhost:3333/mcp
```
–ï—Å–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ ‚Äî –±—É–¥–µ—Ç 406/400.

## 3) –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –æ—Ç–ª–∞–¥—á–∏–∫—É (9229)
```bash
curl -sS -N \
  -H 'Accept: application/json, text/event-stream' \
  -H 'Content-Type: application/json' \
  -H "mcp-session-id: $MCP_SID" \
  -H 'mcp-protocol-version: 2025-03-26' \
  --data '{
    "jsonrpc":"2.0","id":2,
    "method":"tools/call",
    "params":{"name":"attach","arguments":{}}
  }' \
  http://localhost:3333/mcp | sed -n 's/^data: //p'
```
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `attach` –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ `localhost:9229`. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å `{ "port": 9229 }` –∏–ª–∏ `{ "url": "ws://127.0.0.1:9229/..." }`.

## 4) –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ logpoint (–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Ç–æ—á–∫–∞)
–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—É—é —Å—Ç—Ä–æ–∫—É –≤ –≤–∞—à–µ–º —Ñ–∞–π–ª–µ (–ø–æ—Å–ª–µ –Ω—É–∂–Ω—ã—Ö –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–π/–≤—ã—á–∏—Å–ª–µ–Ω–∏–π). –ü—Ä–∏–º–µ—Ä:
- –§–∞–π–ª: `SRC=/abs/path/to/your/file.ts`
- –°—Ç—Ä–æ–∫–∞/–∫–æ–ª–æ–Ω–∫–∞: `LINE=NN`, `COL=MM`
- –®–∞–±–ª–æ–Ω –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ `{expr}`. –î–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä ‚Äî –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –≤ `JSON.stringify(...)`.

```bash
export SRC="/abs/path/to/your/file.ts"   # realpath –∫ —Ñ–∞–π–ª—É
export LINE=NN                            # 1-based
export COL=MM                             # 1-based, –Ω–∞ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ
export LOGMSG='payload={JSON.stringify(yourObjectOrArray)}'  # –∏–ª–∏ 'x={x} y={y}'

jq -n --arg src "$SRC" --argjson line "$LINE" --argjson col "$COL" --arg msg "$LOGMSG" '{
  jsonrpc:"2.0", id:3, method:"tools/call",
  params:{ name:"setBreakpoints", arguments:{
    source:{ path:$src },
    breakpoints:[{ line:$line, column:$col, logMessage:$msg }]
  }}
}' | curl -sS -N \
  -H 'Accept: application/json, text/event-stream' \
  -H 'Content-Type: application/json' \
  -H "mcp-session-id: $MCP_SID" \
  -H 'mcp-protocol-version: 2025-03-26' \
  --data-binary @- http://localhost:3333/mcp | sed -n 's/^data: //p'
```
–°–æ–≤–µ—Ç—ã:
- –ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–π ‚Äî –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ—Å–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏/–∫–æ–ª–æ–Ω–∫–∏, –≥–ª–∞–≤–Ω–æ–µ ‚Äî —á—Ç–æ–±—ã —Ç–æ—á–∫–∞ –±—ã–ª–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–º —É—á–∞—Å—Ç–∫–µ.
- –ú–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ logpoint'–æ–≤ –∑–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤ `setBreakpoints`.

## 5) –ü–æ–∫–∞–∑–∞—Ç—å logpoint —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏ –º–∞—Ä–∫–µ—Ä–æ–º (–ª–æ–∫–∞–ª—å–Ω–æ)
```bash
# –ö–æ–Ω—Ç–µ–∫—Å—Ç (3 —Å—Ç—Ä–æ–∫–∏ –¥–æ –∏ 1 –ø–æ—Å–ª–µ)
nl -ba "$SRC" | sed -n "$((LINE-3)),$((LINE+1))p"

# –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã logpoint
printf "
marker@%s:%d:%d
" "$SRC" "$LINE" "$COL"

# Inline-–º–∞—Ä–∫–µ—Ä: –≤—Å—Ç–∞–≤–ª—è–µ–º üü¢ –ø—Ä—è–º–æ –≤ –∫–æ–¥ –Ω–∞ –Ω—É–∂–Ω–æ–π –∫–æ–ª–æ–Ω–∫–µ
awk -v target="$LINE" -v col="$COL" 'NR>=target-3 && NR<=target+1{
  if (NR==target){
    pre=substr($0,1,col-1); post=substr($0,col);
    printf("%6d	%s%s%s
", NR, pre, "üü¢", post);
  } else {
    printf("%6d	%s
", NR, $0);
  }
}' "$SRC"
```
## 6) –¢—Ä–∏–≥–≥–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–±–æ—Ä –ø–æ–ø–∞–¥–∞–Ω–∏–π
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–æ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏: HTTP-–∑–∞–ø—Ä–æ—Å, CLI-–∫–æ–º–∞–Ω–¥–∞, –≤–æ—Ä–∫–µ—Ä –∏ —Ç.–ø.
  - –ü—Ä–∏–º–µ—Ä HTTP: `curl -s -o /dev/null 'http://localhost:5000/your-endpoint'`
  - –ò–ª–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ —à–∞–≥–∏ –≤ UI/—Å–∫—Ä–∏–ø—Ç–µ.
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1‚Äì2 —Å–µ–∫—É–Ω–¥—ã (–∏–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ—Å—å –∏–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º).

–ó–∞–±—Ä–∞—Ç—å –ø–æ–ø–∞–¥–∞–Ω–∏—è logpoint:
```bash
curl -sS -N \
  -H 'Accept: application/json, text/event-stream' \
  -H 'Content-Type: application/json' \
  -H "mcp-session-id: $MCP_SID" \
  -H 'mcp-protocol-version: 2025-03-26' \
  --data '{"jsonrpc":"2.0","id":4,"method":"tools/call","params":{"name":"getLogpointHits","arguments":{}}}' \
  http://localhost:3333/mcp | sed -n 's/^data: //p' | tail -n1 | tee /tmp/hits.json

# –ü—Ä–∏–º–µ—Ä –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (–µ—Å–ª–∏ –≤ logMessage –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è JSON.stringify(...))
jq -r '.result.content[0].text' /tmp/hits.json | jq -r . > /tmp/hits_parsed.json
jq -r '.hits[-1].payload.vars["JSON.stringify(yourObjectOrArray)"]' /tmp/hits_parsed.json | jq -r '.' > /tmp/log_payload.json

# –ü–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî —Å–æ–∫—Ä–∞—Ç–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–æ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π
jq '[ .[] | {id: (.id // ._id), title: (.title // .name), hasAccess: (.hasAccess)} ]' /tmp/log_payload.json | jq '.'
```

## 7) –ü–æ–ª–µ–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
- –°–ø–∏—Å–æ–∫/—Å–Ω—è—Ç–∏–µ –±—Ä–µ–π–∫–ø–æ–∏–Ω—Ç–æ–≤: `tools/call getBreakpoints`, `tools/call removeBreakpoint`, –ø–æ–≤—Ç–æ—Ä–Ω—ã–π `setBreakpoints`.
- –û—á–∏—Å—Ç–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏–π: `tools/call clearLogpointHits`.
- –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è: `tools/call getDebuggerEvents`.
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ MCP-—Å–µ—Å—Å–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```bash
curl -sS -X DELETE \
  -H "mcp-session-id: $MCP_SID" \
  -H 'mcp-protocol-version: 2025-03-26' \
  http://localhost:3333/mcp -D -
```
- –û—Å—Ç–∞–Ω–æ–≤ MCP HTTP —Å–µ—Ä–≤–µ—Ä–∞: –Ω–∞–π–¥–∏—Ç–µ PID, –∑–∞–≤–µ—Ä—à–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å (–µ—Å–ª–∏ –ø–æ–¥–Ω–∏–º–∞–ª–∏ —á–µ—Ä–µ–∑ `nohup`, PID –ø–µ—á–∞—Ç–∞–ª—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ).

## –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ `fuser` –∏ `/health`, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ.
- –†–∞–±–æ—Ç–∞–π—Ç–µ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π HTTP (`localhost`) –∏ –æ–¥–Ω—É MCP-—Å–µ—Å—Å–∏—é.
- –í—Å–µ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (`Accept`, `mcp-session-id`, `mcp-protocol-version`).
- –°—Ç–∞–≤—å—Ç–µ logpoint –Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Å—Ç—Ä–æ–∫–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫.
- –î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π `jq`, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏–π —Å–µ—Ç–∏.

## –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ MCP HTTP —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ—Ä—Ç 3333)
–ï—Å–ª–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∏–¥–∏—Ç–µ ¬´Server already initialized¬ª, –Ω–µ—Ç `mcp-session-id` –≤ –æ—Ç–≤–µ—Ç–µ, `/health` –Ω–µ OK, –ª–∏–±–æ –ø–æ—Ä—Ç 3333 –∑–∞–Ω—è—Ç ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫.

### –®–∞–≥–∏
```bash
# 1) –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å (–µ—Å–ª–∏ –µ—Å—Ç—å)
cd ~/devel/mcp-chrome-debugger-protocol
if [ -f .mcp-http.pid ]; then
  kill "$(cat .mcp-http.pid)" 2>/dev/null || true
  sleep 0.3
  rm -f .mcp-http.pid
fi
# –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π —É–±–∏—Ç—å —Å–ª—É—à–∞—Ç–µ–ª—å –ø–æ—Ä—Ç–∞ 3333
fuser -k 3333/tcp || true

# (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–ª–∏–ø—à—É—é MCP-—Å–µ—Å—Å–∏—é, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç
curl -sS -X DELETE \
  -H "mcp-protocol-version: 2025-03-26" \
  http://localhost:3333/mcp -o /dev/null || true

# 2) –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ –Ω–∞ 3333 –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å PID
cd ~/devel/mcp-chrome-debugger-protocol
nohup npm run http-server -- --port 3333 > .mcp-http.log 2>&1 & echo $! | tee .mcp-http.pid

# 3) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç –∏ /health
fuser 3333/tcp || true
curl -fsS http://localhost:3333/health

# 4) –ü–æ–≤—Ç–æ—Ä–∏—Ç—å initialize —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏ –≤–∑—è—Ç—å –Ω–æ–≤—ã–π mcp-session-id
#   - Accept: application/json, text/event-stream
#   - Content-Type: application/json
#   - mcp-protocol-version: 2025-03-26
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:
- –í—Å–µ–≥–¥–∞ –∑–∞–¥–∞–≤–∞–π—Ç–µ `--port 3333`, —á—Ç–æ–±—ã –∏–∑–±–µ–≥–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
- –ï—Å–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Node-–ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ª–∞–¥–∫–∏ –∑–∞–ø—É—â–µ–Ω —Å `--inspect=9229`.
- –î–ª—è —á–∏—Å—Ç–æ—Ç—ã –º–æ–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –ø–æ–ø–∞–¥–∞–Ω–∏—è: `tools/call clearLogpointHits`.
